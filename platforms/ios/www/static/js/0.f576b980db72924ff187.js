webpackJsonp([0],{"/66K":function(t,e,o){var n=o("XLwt"),a=o("YCip");o("nuAP"),o("QdU8"),n.registerCoordinateSystem("bmap",a),n.registerAction({type:"bmapRoam",event:"bmapRoam",update:"updateLayout"},function(t,e){e.eachComponent("bmap",function(t){var e=t.getBMap(),o=e.getCenter();t.setCenterAndZoom([o.lng,o.lat],e.getZoom())})});e.version="1.0.0"},"9bBU":function(t,e,o){o("mClu");var n=o("FeBl").Object;t.exports=function(t,e,o){return n.defineProperty(t,e,o)}},C4MV:function(t,e,o){t.exports={default:o("9bBU"),__esModule:!0}},Hc2B:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o("Dd8w"),a=o.n(n),i=o("bOdI"),r=o.n(i),s=o("NYxO"),c=o("Icdr");o("/66K");var l={data:function(){var t;return t={mapdata:{},centerdata:{},datacolor:{"传统服务业":"#66d2ff","供应链管理":"#e8e825","其他":"#8a66ff","加工制造":"#eb66ff","整合信息":"#ffaa66","旅游文化创意":"#32b16c","日用制造":"#e565ac","物流采购":"#a98eff","现在服务业":"#6695ff","研发":"#1f4fe9","能源与基础原材料":"#0086d3","装备制造":"#d1c0a5","重化工制造":"#84ccc9"},seriesdata:[],showlegend:!1,asd:null,phoneNum:"",selectAll:!1,myStyleJson:[{featureType:"background",elementType:"geometry",stylers:{color:"#fefeee"}}],centerId:"",companyList:[],myCharts:null},r()(t,"datacolor",{"传统服务业":"#66d2ff","供应链管理":"#e8e825","其他":"#8a66ff","加工制造":"#eb66ff","整合信息":"#ffaa66","旅游文化创意":"#32b16c","日用制造":"#e565ac","物流采购":"#a98eff","现代服务业":"#6695ff","研发":"#1f4fe9","能源与基础原材料":"#0086d3","装备制造":"#d1c0a5","重化工制造":"#84ccc9"}),r()(t,"total",6e3),t},watch:{},computed:a()({},Object(s.d)({isActive:"isActive",centerpoint:"centerpoint",userMessage:"userMessage"})),mounted:function(){this.centerId=this.$route.query.centerId,this.getList(),this.getpoints()},methods:a()({},Object(s.c)(["setisActive"]),{goback:function(){this.$router.go(-1)},changetype:function(t){if(this.setisActive(t),"chart"==t){this.getList()}},setpiechart:function(t,e){var o={tooltip:{trigger:"item",formatter:function(t){return t.name+"："+e[t.name]+"%"}},legend:{show:!0,type:"scroll",orient:"vertical",right:10,top:10,height:140,backgroundColor:"rgba(255,255,255,.8)",borderColor:"#eee",formatter:function(t){return t+"("+e[t]+"%)"}},series:[{type:"pie",radius:"50%",center:["50%","55%"],data:t,label:{color:"#fff",padding:2}}]},n=c.init(document.getElementById("piechart"));this.myCharts=n,n.setOption(o)},getList:function(t){var e=this;e.companyList=[],e.api(e,"post","信息获取中...","common/company/findEconomicsAndCompany",{pageSize:20},function(t){if(console.log(t),0==t.statusCode&&(e.companyList=e.companyList.concat(t.dataInfo.listData),e.total=t.extData.companyCount,console.log(e.total),"chart"==e.isActive)){var o={},n=e.companyList.map(function(t){return o[t.cEconomicsName]=(t.countCompany/e.total*100).toFixed(2),{value:t.countCompany,name:t.cEconomicsName,label:{backgroundColor:e.datacolor[t.cEconomicsName]},itemStyle:{color:e.datacolor[t.cEconomicsName]}}});e.setpiechart(n,o)}})},goItem:function(t,e){console.log(t);this.$router.push({path:"ecCompanylist",query:{cEconomicsId:t,pointCenterId:this.centerId,cEconomicsName:e}})},gocompChart:function(){this.$router.push({path:"compChart",query:{centerId:this.centerpoint.centerId}})},init:function(){var t=this;console.log(t.centerpoint),console.log(t.mapdata),console.log(t.userMessage),t.phoneNum=t.userMessage.userAccount,t.centerdata.name=t.centerpoint.centerName,t.centerdata.lng=t.centerpoint.centerLongitude,t.centerdata.lat=t.centerpoint.centerLatitude,t.drawChinaMap(t.centerdata.lng,t.centerdata.lat,13)},getpoints:function(){var t=this;t.api(t,"post","信息获取中...","common/company/findCompanyByObj.json",{centerId:t.centerpoint.centerId,pageSize:6e3},function(e){if(0==e.statusCode){t.gkshow=!0,console.log(e);for(var o=0;o<e.dataInfo.listData.length;o++)t.mapdata[e.dataInfo.listData[o].cEconomicsName]=e.dataInfo.listData[o].data;t.init()}})},convertData:function(t){var e=this,o=[];console.log("aaaaaaaaaaaaaaaaaaaaaaaaaaaaa");for(var n=0;n<e.mapdata[t].length;n++)e.mapdata[t][n].ponitLongitude&&e.mapdata[t][n].ponitLatitude&&o.push({name:e.mapdata[t][n].companyName,value:[e.mapdata[t][n].ponitLongitude,e.mapdata[t][n].ponitLatitude]});return o},setpointserise:function(t){var e=[{name:"中心点",type:"effectScatter",coordinateSystem:"bmap",data:[],symbolSize:20,showEffectOn:"render",rippleEffect:{brushType:"stroke"},hoverAnimation:!1,itemStyle:{normal:{color:"#00a8ff",shadowBlur:10,shadowColor:"#333"}},zlevel:1}];for(var o in this.datacolor)e.push({name:o,type:"scatter",coordinateSystem:"bmap",data:this.convertData(o),symbolSize:t,hoverAnimation:!1,itemStyle:{normal:{color:this.datacolor[o],show:!1}}});return e},drawChinaMap:function(t,e,o){var n=this,a={title:{text:""},tooltip:{trigger:"item",formatter:"{a}<br>{b}",position:["5%","50%"]},legend:{show:n.showlegend,orient:"horizontal",right:80,top:3,zlevel:9999,backgroundColor:"rgba(255,255,255,.8)",borderColor:"#eee",selected:{"传统服务业":!0,"供应链管理":!0,"其他":!1,"加工制造":!0,"整合信息":!0,"旅游文化创意":!0,"日用制造":!0,"物流采购":!1,"现代服务业":!1,"研发":!1,"能源与基础原材料":!1,"装备制造":!1,"重化工制造":!1}},bmap:{center:[t,e],zoom:o,roam:!0},series:n.setpointserise(7),animation:!1},i=c.init(document.getElementById("myChart"));i.setOption(a);var r=i.getModel().getComponent("bmap").getBMap();n.addControl(r,"图例显隐",BMAP_ANCHOR_TOP_RIGHT,10,10,function(){n.showlegend=!n.showlegend,i.setOption({legend:{show:n.showlegend}}),1==n.showlegend?n.addControl(r,"全选",BMAP_ANCHOR_TOP_RIGHT,10,50,function(){n.selectAll=!n.selectAll,n.setlengthsele(i,n.selectAll)}):n.deletecontrol(r)}),r.addEventListener("zoomend",function(t){var e=r.getZoom(),o=r.getCenter();e>10&&i.setOption({series:n.setpointserise(2*e-19),bmap:{center:[o.lng,o.lat],zoom:e,roam:!0}})})},topcontrol:function(t){this.$router.push({path:"companylistchart",query:{companyCount:this.centerpoint.companyCount,position:t,centerId:this.centerpoint.centerId}})},setlengthsele:function(t,e){1==e?t.setOption({legend:{selected:{"传统服务业":!0,"供应链管理":!0,"其他":!0,"加工制造":!0,"整合信息":!0,"旅游文化创意":!0,"日用制造":!0,"物流采购":!0,"现在服务业":!0,"研发":!0,"能源与基础原材料":!0,"装备制造":!0,"重化工制造":!0}}}):t.setOption({legend:{selected:{"传统服务业":!1,"供应链管理":!1,"其他":!1,"加工制造":!1,"整合信息":!1,"旅游文化创意":!1,"日用制造":!1,"物流采购":!1,"现在服务业":!1,"研发":!1,"能源与基础原材料":!1,"装备制造":!1,"重化工制造":!1}}})},getlinedata:function(t,e,o){return{top:{lng:t,lat:(e+9e-6*o).toFixed(5)},bottom:{lng:t,lat:(e-9e-6*o).toFixed(5)},left:{lng:(t-1e-5*o).toFixed(5),lat:e},right:{lng:(t+1e-5*o).toFixed(5),lat:e}}},addControl:function(t,e,o,n,a,i){function r(){this.defaultAnchor=o,this.defaultOffset=new BMap.Size(n,a)}r.prototype=new BMap.Control,r.prototype.initialize=function(t){var o=document.createElement("div");return o.appendChild(document.createTextNode(e)),o.classList.add("Controlfour"),o.style.cursor="pointer",o.style.border="1px solid #ccc",o.style.backgroundColor="rgba(255,255,255,.5)",o.style.borderRadius="3px",o.style.padding="5px",o.style.boxShadow="1px 1px 2px rgba(0,0,0,.4)",o.onclick=i,t.getContainer().appendChild(o),o};var s=new r;this.asd=s,t.addControl(s)},deletecontrol:function(t){t.removeControl(this.asd)}})},p={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("yd-layout",{attrs:{id:"conlist"}},[o("yd-navbar",{attrs:{slot:"navbar",bgcolor:"#0FA0FA",color:"#fff"},slot:"navbar"},[o("yd-navbar-back-icon",{attrs:{slot:"left",color:"#fff"},nativeOn:{click:function(e){return t.goback(e)}},slot:"left"}),t._v(" "),o("div",{staticStyle:{display:"flex"},attrs:{slot:"center"},slot:"center"},[o("span",{staticClass:"tab",class:"chart2"==t.isActive?"active":"",on:{click:function(e){t.changetype("chart2")}}},[t._v("布局图")]),t._v(" "),o("span",{staticClass:"tab",class:"chart"==t.isActive?"active":"",on:{click:function(e){t.changetype("chart")}}},[t._v("统计图")]),t._v(" "),o("span",{staticClass:"tab",class:"list"==t.isActive?"active":"",on:{click:function(e){t.changetype("list")}}},[t._v("明细")])])],1),t._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:"list"==t.isActive,expression:"isActive=='list'"}],staticClass:"list"},t._l(t.companyList,function(e,n){return o("div",{staticClass:"companylist",on:{click:function(o){t.goItem(e.cEconomicsId,e.cEconomicsName)}}},[o("div",{staticStyle:{"border-bottom":"solid 1px #eee"}},[o("yd-cell-item",[o("span",{attrs:{slot:"left"},slot:"left"},[t._v(t._s(e.cEconomicsName))]),t._v(" "),o("span",{attrs:{slot:"right"},slot:"right"},[t._v(t._s(e.countCompany)+"个企业")])])],1)])})),t._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:"chart"==t.isActive,expression:"isActive=='chart'"}],staticClass:"baicontent"},[o("div",{staticClass:"lineChart",attrs:{id:"piechart"}})]),t._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:"chart2"==t.isActive,expression:"isActive=='chart2'"}],staticClass:"baicontent1"},[o("div",{staticClass:"lineChart2"},[o("div",{staticClass:"center"},[o("span",{staticClass:"centertxt"},[t._v("中国乌镇")]),t._v(" "),t._l(t.companyList,function(e,n){return o("div",{staticClass:"line",style:"transform: rotate("+parseInt(360/t.companyList.length)*n+"deg)",on:{click:function(o){if(o.target!==o.currentTarget)return null;t.goItem(e.cEconomicsId,e.cEconomicsName)}}},[t._l(e.levelList,function(e){return o("div",{staticClass:"lineItem"},[o("span",{staticClass:"lineleft"}),t._v(" "),o("span",{staticClass:"linecenter"}),t._v(" "),o("span",{staticClass:"lineright"})])}),t._v(" "),o("div",{staticClass:"centerLine",style:{background:"linear-gradient(to right,"+t.datacolor[e.cEconomicsName]+","+t.datacolor[e.cEconomicsName]+" 5px, transparent 5px, transparent)",backgroundSize:"10px 100%"}})],2)})],2)]),t._v(" "),o("div",{staticClass:"mapcontent"},[o("div",{staticStyle:{width:"100%",height:"100%",overflow:"hidden"},attrs:{id:"myChart"}})])])],1)},staticRenderFns:[]};var d=o("VU/8")(l,p,!1,function(t){o("OyA4")},"data-v-fd034070",null);e.default=d.exports},OyA4:function(t,e){},QdU8:function(t,e,o){var n=o("XLwt").extendComponentView({type:"bmap",render:function(t,e,o){var n=!0,a=t.getBMap(),i=o.getZr().painter.getViewportRoot(),r=t.coordinateSystem,s=function(e,a){if(!n){var s=i.parentNode.parentNode.parentNode,c=[-parseInt(s.style.left,10)||0,-parseInt(s.style.top,10)||0];i.style.left=c[0]+"px",i.style.top=c[1]+"px",r.setMapOffset(c),t.__mapOffset=c,o.dispatchAction({type:"bmapRoam"})}};function c(){n||o.dispatchAction({type:"bmapRoam"})}a.removeEventListener("moving",this._oldMoveHandler),a.removeEventListener("zoomend",this._oldZoomEndHandler),a.addEventListener("moving",s),a.addEventListener("zoomend",c),this._oldMoveHandler=s,this._oldZoomEndHandler=c;var l=t.get("roam");l&&"scale"!==l?a.enableDragging():a.disableDragging(),l&&"move"!==l?(a.enableScrollWheelZoom(),a.enableDoubleClickZoom(),a.enablePinchToZoom()):(a.disableScrollWheelZoom(),a.disableDoubleClickZoom(),a.disablePinchToZoom());var p=t.__mapStyle,d=t.get("mapStyle")||{},m=JSON.stringify(d);JSON.stringify(p)!==m&&(Object.keys(d).length&&a.setMapStyle(d),t.__mapStyle=JSON.parse(m)),n=!1}});t.exports=n},YCip:function(t,e,o){var n,a=o("XLwt"),i=a.util,r=a.graphic,s=a.matrix;function c(t,e){this._bmap=t,this.dimensions=["lng","lat"],this._mapOffset=[0,0],this._api=e,this._projection=new BMap.MercatorProjection}function l(t,e){return e=e||[0,0],i.map([0,1],function(o){var n=e[o],a=t[o]/2,i=[],r=[];return i[o]=n-a,r[o]=n+a,i[1-o]=r[1-o]=e[1-o],Math.abs(this.dataToPoint(i)[o]-this.dataToPoint(r)[o])},this)}c.prototype.dimensions=["lng","lat"],c.prototype.setZoom=function(t){this._zoom=t},c.prototype.setCenter=function(t){this._center=this._projection.lngLatToPoint(new BMap.Point(t[0],t[1]))},c.prototype.setMapOffset=function(t){this._mapOffset=t},c.prototype.getBMap=function(){return this._bmap},c.prototype.dataToPoint=function(t){var e=new BMap.Point(t[0],t[1]),o=this._bmap.pointToOverlayPixel(e),n=this._mapOffset;return[o.x-n[0],o.y-n[1]]},c.prototype.pointToData=function(t){var e=this._mapOffset;return[(t=this._bmap.overlayPixelToPoint({x:t[0]+e[0],y:t[1]+e[1]})).lng,t.lat]},c.prototype.getViewRect=function(){var t=this._api;return new r.BoundingRect(0,0,t.getWidth(),t.getHeight())},c.prototype.getRoamTransform=function(){return s.create()},c.prototype.prepareCustoms=function(t){var e=this.getViewRect();return{coordSys:{type:"bmap",x:e.x,y:e.y,width:e.width,height:e.height},api:{coord:i.bind(this.dataToPoint,this),size:i.bind(l,this)}}},c.dimensions=c.prototype.dimensions,c.create=function(t,e){var o,a=e.getDom();t.eachComponent("bmap",function(t){var i=e.getZr().painter,r=i.getViewportRoot();if("undefined"==typeof BMap)throw new Error("BMap api is not loaded");if(n=n||function(){function t(t){this._root=t}return t.prototype=new BMap.Overlay,t.prototype.initialize=function(t){return t.getPanes().labelPane.appendChild(this._root),this._root},t.prototype.draw=function(){},t}(),o)throw new Error("Only one bmap component can exist");if(!t.__bmap){var s=a.querySelector(".ec-extension-bmap");s&&(r.style.left="0px",r.style.top="0px",a.removeChild(s)),(s=document.createElement("div")).style.cssText="width:100%;height:100%",s.classList.add("ec-extension-bmap"),a.appendChild(s);var l=t.__bmap=new BMap.Map(s),p=new n(r);l.addOverlay(p),i.getViewportRootOffset=function(){return{offsetLeft:0,offsetTop:0}}}l=t.__bmap;var d=t.get("center"),m=t.get("zoom");if(d&&m){var f=new BMap.Point(d[0],d[1]);l.centerAndZoom(f,m)}(o=new c(l,e)).setMapOffset(t.__mapOffset||[0,0]),o.setZoom(m),o.setCenter(d),t.coordinateSystem=o}),t.eachSeries(function(t){"bmap"===t.get("coordinateSystem")&&(t.coordinateSystem=o)})};var p=c;t.exports=p},bOdI:function(t,e,o){"use strict";e.__esModule=!0;var n,a=o("C4MV"),i=(n=a)&&n.__esModule?n:{default:n};e.default=function(t,e,o){return e in t?(0,i.default)(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}},mClu:function(t,e,o){var n=o("kM2E");n(n.S+n.F*!o("+E39"),"Object",{defineProperty:o("evD5").f})},nuAP:function(t,e,o){var n=o("XLwt").extendComponentModel({type:"bmap",getBMap:function(){return this.__bmap},setCenterAndZoom:function(t,e){this.option.center=t,this.option.zoom=e},centerOrZoomChanged:function(t,e){var o,n,a=this.option;return o=t,n=a.center,!(o&&n&&o[0]===n[0]&&o[1]===n[1]&&e===a.zoom)},defaultOption:{center:[104.114129,37.550339],zoom:5,mapStyle:{},roam:!1}});t.exports=n}});