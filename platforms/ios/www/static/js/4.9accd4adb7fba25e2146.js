webpackJsonp([4],{B31D:function(t,n,e){t.exports=e.p+"static/img/locl.a723b0f.png"},Dr18:function(t,n){},nZP2:function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=e("Dd8w"),o=e.n(a),i=e("B31D"),r=e.n(i),d=e("NYxO"),c={data:function(){return{pointdata:{lng:"",lat:""}}},watch:{},mounted:function(){var t=this.centerpoint.centerLongitude,n=this.centerpoint.centerLatitude;this.initMap(t,n)},computed:o()({},Object(d.d)({centerpoint:"centerpoint"})),methods:{initMap:function(t,n){var e=this,a=new BMap.Map("container"),o=new BMap.Point(t,n);a.centerAndZoom(o,14),a.enableScrollWheelZoom(!0),a.addControl(new BMap.NavigationControl),e.addControl(a,"乌镇",BMAP_ANCHOR_BOTTOM_LEFT,10,50,function(){a.clearOverlays();var t=new BMap.Point(e.centerpoint.centerLongitude,e.centerpoint.centerLatitude);a.panTo(t),e.addmarker(e.centerpoint.centerLongitude,e.centerpoint.centerLatitude,a,!0)}),e.addControl(a,"定位",BMAP_ANCHOR_BOTTOM_LEFT,10,100,function(){a.clearOverlays(),e.setlocation(a)})},setlocation:function(t){var n=this;n.$dialog.loading.open("获取定位中..."),(new BMap.Geolocation).getCurrentPosition(function(e){n.$dialog.loading.close(),this.getStatus()==BMAP_STATUS_SUCCESS?(t.panTo(e.point),n.addmarker(e.point.lng,e.point.lat,t,!0)):(n.addmarker(n.centerpoint.centerLongitude,n.centerpoint.centerLatitude,t,!0),n.$dialog.toast({mes:"获取定位失败",timeout:1500}))},{enableHighAccuracy:!0})},addcompany:function(){this.$router.push({path:"addcompany",query:{lng:this.pointdata.lng,lat:this.pointdata.lat}})},addmarker:function(t,n,e,a){var o=this,i=new BMap.Point(t,n);o.pointdata.lng=parseFloat(t).toFixed(6),o.pointdata.lat=parseFloat(n).toFixed(6);var d=new BMap.Icon(r.a,new BMap.Size(50,50)),c=new BMap.Marker(i,{icon:d});e.addOverlay(c),1==a&&(c.enableDragging(),c.addEventListener("dragend",function(t){o.pointdata.lng=t.point.lng,o.pointdata.lat=t.point.lat}))},addControl:function(t,n,e,a,o,i){function r(){this.defaultAnchor=e,this.defaultOffset=new BMap.Size(a,o)}r.prototype=new BMap.Control,r.prototype.initialize=function(t){var e=document.createElement("div");return e.appendChild(document.createTextNode(n)),e.classList.add("Controlfour"),e.style.cursor="pointer",e.style.border="1px solid #ccc",e.style.backgroundColor="rgba(255,255,255,.5)",e.style.borderRadius="3px",e.style.padding="5px",e.style.boxShadow="1px 1px 2px rgba(0,0,0,.4)",e.onclick=i,t.getContainer().appendChild(e),e};var d=new r;t.addControl(d)}}},l={render:function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{attrs:{id:"loction"}},[e("yd-navbar",{staticStyle:{width:"100%"},attrs:{title:"走访记录",bgcolor:"#0FA0FA",color:"#fff"}}),t._v(" "),e("div",{staticClass:"topmess"},[t._v("当前位置： "+t._s(t.pointdata.lng)+" , "+t._s(t.pointdata.lat))]),t._v(" "),t._m(0),t._v(" "),e("div",{staticClass:"bottbut",on:{click:t.addcompany}},[e("yd-tabbar",{attrs:{fontsize:"0.28rem",color:"#0FA0FA"}},[e("yd-tabbar-item",{attrs:{title:"记录",link:"#"}},[e("i",{staticClass:"iconfont icon-yduifankui",staticStyle:{"font-size":"0.54rem",color:"#0FA0FA"},attrs:{slot:"icon"},slot:"icon"})])],1)],1)],1)},staticRenderFns:[function(){var t=this.$createElement,n=this._self._c||t;return n("div",{staticClass:"mapcontent"},[n("div",{staticStyle:{width:"100%",height:"100%",overflow:"hidden"},attrs:{id:"container"}})])}]};var s=e("VU/8")(c,l,!1,function(t){e("Dr18")},"data-v-43b166de",null);n.default=s.exports}});