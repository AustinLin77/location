webpackJsonp([1],{"/66K":function(t,e,o){var n=o("XLwt"),a=o("YCip");o("nuAP"),o("QdU8"),n.registerCoordinateSystem("bmap",a),n.registerAction({type:"bmapRoam",event:"bmapRoam",update:"updateLayout"},function(t,e){e.eachComponent("bmap",function(t){var e=t.getBMap(),o=e.getCenter();t.setCenterAndZoom([o.lng,o.lat],e.getZoom())})});e.version="1.0.0"},QdU8:function(t,e,o){var n=o("XLwt").extendComponentView({type:"bmap",render:function(t,e,o){var n=!0,a=t.getBMap(),i=o.getZr().painter.getViewportRoot(),r=t.coordinateSystem,s=function(e,a){if(!n){var s=i.parentNode.parentNode.parentNode,p=[-parseInt(s.style.left,10)||0,-parseInt(s.style.top,10)||0];i.style.left=p[0]+"px",i.style.top=p[1]+"px",r.setMapOffset(p),t.__mapOffset=p,o.dispatchAction({type:"bmapRoam"})}};function p(){n||o.dispatchAction({type:"bmapRoam"})}a.removeEventListener("moving",this._oldMoveHandler),a.removeEventListener("zoomend",this._oldZoomEndHandler),a.addEventListener("moving",s),a.addEventListener("zoomend",p),this._oldMoveHandler=s,this._oldZoomEndHandler=p;var c=t.get("roam");c&&"scale"!==c?a.enableDragging():a.disableDragging(),c&&"move"!==c?(a.enableScrollWheelZoom(),a.enableDoubleClickZoom(),a.enablePinchToZoom()):(a.disableScrollWheelZoom(),a.disableDoubleClickZoom(),a.disablePinchToZoom());var d=t.__mapStyle,l=t.get("mapStyle")||{},m=JSON.stringify(l);JSON.stringify(d)!==m&&(Object.keys(l).length&&a.setMapStyle(l),t.__mapStyle=JSON.parse(m)),n=!1}});t.exports=n},"XZ+o":function(t,e){},YCip:function(t,e,o){var n,a=o("XLwt"),i=a.util,r=a.graphic,s=a.matrix;function p(t,e){this._bmap=t,this.dimensions=["lng","lat"],this._mapOffset=[0,0],this._api=e,this._projection=new BMap.MercatorProjection}function c(t,e){return e=e||[0,0],i.map([0,1],function(o){var n=e[o],a=t[o]/2,i=[],r=[];return i[o]=n-a,r[o]=n+a,i[1-o]=r[1-o]=e[1-o],Math.abs(this.dataToPoint(i)[o]-this.dataToPoint(r)[o])},this)}p.prototype.dimensions=["lng","lat"],p.prototype.setZoom=function(t){this._zoom=t},p.prototype.setCenter=function(t){this._center=this._projection.lngLatToPoint(new BMap.Point(t[0],t[1]))},p.prototype.setMapOffset=function(t){this._mapOffset=t},p.prototype.getBMap=function(){return this._bmap},p.prototype.dataToPoint=function(t){var e=new BMap.Point(t[0],t[1]),o=this._bmap.pointToOverlayPixel(e),n=this._mapOffset;return[o.x-n[0],o.y-n[1]]},p.prototype.pointToData=function(t){var e=this._mapOffset;return[(t=this._bmap.overlayPixelToPoint({x:t[0]+e[0],y:t[1]+e[1]})).lng,t.lat]},p.prototype.getViewRect=function(){var t=this._api;return new r.BoundingRect(0,0,t.getWidth(),t.getHeight())},p.prototype.getRoamTransform=function(){return s.create()},p.prototype.prepareCustoms=function(t){var e=this.getViewRect();return{coordSys:{type:"bmap",x:e.x,y:e.y,width:e.width,height:e.height},api:{coord:i.bind(this.dataToPoint,this),size:i.bind(c,this)}}},p.dimensions=p.prototype.dimensions,p.create=function(t,e){var o,a=e.getDom();t.eachComponent("bmap",function(t){var i=e.getZr().painter,r=i.getViewportRoot();if("undefined"==typeof BMap)throw new Error("BMap api is not loaded");if(n=n||function(){function t(t){this._root=t}return t.prototype=new BMap.Overlay,t.prototype.initialize=function(t){return t.getPanes().labelPane.appendChild(this._root),this._root},t.prototype.draw=function(){},t}(),o)throw new Error("Only one bmap component can exist");if(!t.__bmap){var s=a.querySelector(".ec-extension-bmap");s&&(r.style.left="0px",r.style.top="0px",a.removeChild(s)),(s=document.createElement("div")).style.cssText="width:100%;height:100%",s.classList.add("ec-extension-bmap"),a.appendChild(s);var c=t.__bmap=new BMap.Map(s),d=new n(r);c.addOverlay(d),i.getViewportRootOffset=function(){return{offsetLeft:0,offsetTop:0}}}c=t.__bmap;var l=t.get("center"),m=t.get("zoom");if(l&&m){var u=new BMap.Point(l[0],l[1]);c.centerAndZoom(u,m)}(o=new p(c,e)).setMapOffset(t.__mapOffset||[0,0]),o.setZoom(m),o.setCenter(l),t.coordinateSystem=o}),t.eachSeries(function(t){"bmap"===t.get("coordinateSystem")&&(t.coordinateSystem=o)})};var d=p;t.exports=d},caIY:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o("Dd8w"),a=o.n(n),i=o("NYxO"),r=o("Icdr");o("/66K");var s={data:function(){return{addComp:{},gkshow:!1,mapdata:{},centerdata:{},datacolor:{"传统服务业":"#66d2ff","供应链管理":"#e8e825","其他":"#8a66ff","加工制造":"#eb66ff","整合信息":"#ffaa66","旅游文化创意":"#32b16c","日用制造":"#e565ac","物流采购":"#a98eff","现代服务业":"#6695ff","研发":"#1f4fe9","能源与基础原材料":"#0086d3","装备制造":"#d1c0a5","重化工制造":"#84ccc9"},seriesdata:[],showlegend:!1,asd:null,phoneNum:"",selectAll:!1,myStyleJson:[{featureType:"background",elementType:"geometry",stylers:{color:"#fefeee"}}]}},computed:a()({},Object(i.d)({centerpoint:"centerpoint",userMessage:"userMessage"})),watch:{},mounted:function(){this.getpoints()},methods:{gocompChart:function(){this.$router.push({path:"compChart",query:{centerId:this.centerpoint.centerId}})},init:function(){var t=this;console.log(t.centerpoint),console.log(t.mapdata),console.log(t.userMessage),t.phoneNum=t.userMessage.userAccount,t.centerdata.name=t.centerpoint.centerName,t.centerdata.lng=t.centerpoint.centerLongitude,t.centerdata.lat=t.centerpoint.centerLatitude,t.drawChinaMap(t.centerdata.lng,t.centerdata.lat,13)},getpoints:function(){var t=this;t.api(t,"post","信息获取中...","common/company/findCompanyByObj.json",{centerId:t.centerpoint.centerId,pageSize:6e3},function(e){if(0==e.statusCode){t.gkshow=!0,console.log(e);for(var o=0;o<e.dataInfo.listData.length;o++)t.mapdata[e.dataInfo.listData[o].cEconomicsName]=e.dataInfo.listData[o].data;t.init()}})},convertData:function(t){var e=this,o=[];console.log("aaaaaaaaaaaaaaaaaaaaaaaaaaaaa");for(var n=0;n<e.mapdata[t].length;n++)e.mapdata[t][n].ponitLongitude&&e.mapdata[t][n].ponitLatitude&&o.push({name:e.mapdata[t][n].companyName,value:[e.mapdata[t][n].ponitLongitude,e.mapdata[t][n].ponitLatitude]});return o},setpointserise:function(t){var e=[{name:"中心点",type:"effectScatter",coordinateSystem:"bmap",data:[],symbolSize:20,showEffectOn:"render",rippleEffect:{brushType:"stroke"},hoverAnimation:!1,itemStyle:{normal:{color:"#00a8ff",shadowBlur:10,shadowColor:"#333"}},zlevel:1}];for(var o in this.datacolor)e.push({name:o,type:"scatter",coordinateSystem:"bmap",data:this.convertData(o),symbolSize:t,hoverAnimation:!1,itemStyle:{normal:{color:this.datacolor[o],show:!1}}});return e},drawChinaMap:function(t,e,o){var n=this,a={title:{text:""},tooltip:{trigger:"item",formatter:"{a}<br>{b}",position:["5%","50%"]},legend:{show:n.showlegend,orient:"vertical",right:10,top:80,backgroundColor:"rgba(255,255,255,.8)",borderColor:"#eee",selected:{"传统服务业":!0,"供应链管理":!0,"其他":!1,"加工制造":!0,"整合信息":!0,"旅游文化创意":!0,"日用制造":!0,"物流采购":!1,"现在服务业":!1,"研发":!1,"能源与基础原材料":!1,"装备制造":!1,"重化工制造":!1}},bmap:{center:[t,e],zoom:o,roam:!0},series:n.setpointserise(7),animation:!1},i=r.init(document.getElementById("myChart"));i.setOption(a);var s=i.getModel().getComponent("bmap").getBMap();n.addControl(s,"第二象限",BMAP_ANCHOR_TOP_LEFT,10,10,function(){n.topcontrol(2)}),n.addControl(s,"第一象限",BMAP_ANCHOR_TOP_RIGHT,10,10,function(){n.topcontrol(1)}),n.addControl(s,"第四象限",BMAP_ANCHOR_BOTTOM_RIGHT,10,40,function(){n.topcontrol(4)}),n.addControl(s,"第三象限",BMAP_ANCHOR_BOTTOM_LEFT,10,40,function(){n.topcontrol(3)}),n.addControl(s,"图例显隐",BMAP_ANCHOR_TOP_RIGHT,10,50,function(){n.showlegend=!n.showlegend,i.setOption({legend:{show:n.showlegend}}),1==n.showlegend?n.addControl(s,"全选",BMAP_ANCHOR_TOP_RIGHT,80,50,function(){n.selectAll=!n.selectAll,n.setlengthsele(i,n.selectAll)}):n.deletecontrol(s)}),n.addControl(s,"重置中心点",BMAP_ANCHOR_TOP_RIGHT,10,90,function(){var t=s.getCenter().lng,e=s.getCenter().lat;alert("当前地图中心点："+s.getCenter().lng+","+s.getCenter().lat);var o=new BMap.Geocoder,a=new BMap.Point(t,e);o.getLocation(a,function(t){n.addComp=t.addressComponents,console.log(n.addComp);var e=n.addComp.province+n.addComp.city+n.addComp.district;console.log(e),n.api(n,"post","重置中...","common/company/recordCenter.json",{centerId:n.centerpoint.centerId,pageSize:4e3,centerName:e,userAccout:n.phoneNum,longitude:s.getCenter().lng,latitude:s.getCenter().lat},function(t){0==t.statusCode&&(console.log(t),n.$dialog.toast({mes:"重置中心点成功",timeout:1500}))})})}),s.addEventListener("zoomend",function(t){var e=s.getZoom(),o=s.getCenter();e>10&&i.setOption({series:n.setpointserise(2*e-19),bmap:{center:[o.lng,o.lat],zoom:e,roam:!0}})})},topcontrol:function(t){this.$router.push({path:"companylistchart",query:{companyCount:this.centerpoint.companyCount,position:t,centerId:this.centerpoint.centerId}})},setlengthsele:function(t,e){1==e?t.setOption({legend:{selected:{"传统服务业":!0,"供应链管理":!0,"其他":!0,"加工制造":!0,"整合信息":!0,"旅游文化创意":!0,"日用制造":!0,"物流采购":!0,"现在服务业":!0,"研发":!0,"能源与基础原材料":!0,"装备制造":!0,"重化工制造":!0}}}):t.setOption({legend:{selected:{"传统服务业":!1,"供应链管理":!1,"其他":!1,"加工制造":!1,"整合信息":!1,"旅游文化创意":!1,"日用制造":!1,"物流采购":!1,"现在服务业":!1,"研发":!1,"能源与基础原材料":!1,"装备制造":!1,"重化工制造":!1}}})},getlinedata:function(t,e,o){return{top:{lng:t,lat:(e+9e-6*o).toFixed(5)},bottom:{lng:t,lat:(e-9e-6*o).toFixed(5)},left:{lng:(t-1e-5*o).toFixed(5),lat:e},right:{lng:(t+1e-5*o).toFixed(5),lat:e}}},addControl:function(t,e,o,n,a,i){function r(){this.defaultAnchor=o,this.defaultOffset=new BMap.Size(n,a)}r.prototype=new BMap.Control,r.prototype.initialize=function(t){var o=document.createElement("div");return o.appendChild(document.createTextNode(e)),o.classList.add("Controlfour"),o.style.cursor="pointer",o.style.border="1px solid #ccc",o.style.backgroundColor="rgba(255,255,255,.5)",o.style.borderRadius="3px",o.style.padding="5px",o.style.boxShadow="1px 1px 2px rgba(0,0,0,.4)",o.onclick=i,t.getContainer().appendChild(o),o};var s=new r;this.asd=s,t.addControl(s)},deletecontrol:function(t){t.removeControl(this.asd)}}},p={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{id:"zhuye"}},[o("yd-navbar",{attrs:{title:t.centerpoint.areaName,bgcolor:"#0FA0FA",color:"#fff"}},[o("i",{staticClass:"iconfont icon-yduifenlei",staticStyle:{"font-size":"0.4rem",color:"#ffffff"},attrs:{slot:"right"},on:{click:t.gocompChart},slot:"right"})]),t._v(" "),o("div",{staticClass:"mapcontent"},[o("div",{directives:[{name:"show",rawName:"v-show",value:t.gkshow,expression:"gkshow"}],staticStyle:{position:"absolute",top:"calc(50% - 13px)",left:"calc(50% - 13px)",width:"26px",height:"26px","z-index":"98","background-color":"deepskyblue","border-radius":"50%"}}),t._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:t.gkshow,expression:"gkshow"}],staticStyle:{position:"absolute",width:"100%",height:"1px",top:"50%","background-color":"#f66","z-index":"97"}}),t._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:t.gkshow,expression:"gkshow"}],staticStyle:{position:"absolute",width:"1px",height:"100%",left:"50%","background-color":"#f66","z-index":"97"}}),t._v(" "),o("div",{staticStyle:{width:"100%",height:"100%",overflow:"hidden"},attrs:{id:"myChart"}})])],1)},staticRenderFns:[]};var c=o("VU/8")(s,p,!1,function(t){o("XZ+o")},"data-v-0e5d7f48",null);e.default=c.exports},nuAP:function(t,e,o){var n=o("XLwt").extendComponentModel({type:"bmap",getBMap:function(){return this.__bmap},setCenterAndZoom:function(t,e){this.option.center=t,this.option.zoom=e},centerOrZoomChanged:function(t,e){var o,n,a=this.option;return o=t,n=a.center,!(o&&n&&o[0]===n[0]&&o[1]===n[1]&&e===a.zoom)},defaultOption:{center:[104.114129,37.550339],zoom:5,mapStyle:{},roam:!1}});t.exports=n}});